<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Frontier Regional Hospital - Professional ID Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#1f2937,#111827);
    color:#333;
}

.container{
    max-width:750px;
    margin:20px auto;
    background:#ffffff;
    padding:25px;
    border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

h2{
    text-align:center;
    margin-bottom:20px;
    color:#1f2937;
}

form{
    display:flex;
    flex-direction:column;
    gap:12px;
}

label{
    font-weight:600;
    font-size:14px;
}

input{
    padding:12px;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:15px;
}

input:focus{
    outline:none;
    border-color:#1f2937;
}

button{
    padding:14px;
    font-size:16px;
    font-weight:bold;
    border:none;
    border-radius:12px;
    background:#1f2937;
    color:white;
    cursor:pointer;
    transition:.3s;
}

button:hover{
    background:#000;
}

canvas{
    display:block;
    width:100%;
    height:auto;
    margin-top:25px;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

#downloadLink{
    display:none;
    margin-top:15px;
    text-align:center;
    padding:12px;
    background:#1f2937;
    color:white;
    text-decoration:none;
    border-radius:12px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="container">
<h2>Frontier Regional Hospital â€“ Professional ID System</h2>

<form id="idForm">
<label>Full Name</label>
<input type="text" id="name" required>

<label>Position</label>
<input type="text" id="position" required>

<label>Department</label>
<input type="text" id="department" required>

<label>Profile Photo</label>
<input type="file" id="photo" accept="image/*" required>

<button type="submit">Download ID Card</button>
</form>

<canvas id="idCanvas"></canvas>
<a id="downloadLink">Download ID</a>
</div>

<script>
const canvas = document.getElementById("idCanvas");
const ctx = canvas.getContext("2d");

// High resolution for printing
canvas.width = 1000;
canvas.height = 600;

const nameInput = document.getElementById("name");
const positionInput = document.getElementById("position");
const departmentInput = document.getElementById("department");
const photoInput = document.getElementById("photo");
const form = document.getElementById("idForm");
const downloadLink = document.getElementById("downloadLink");

let uploadedPhoto = null;

/* AUTO FONT RESIZE FUNCTION */
function fitText(text, maxWidth, startSize){
    let size = startSize;
    do{
        ctx.font = "bold "+size+"px Segoe UI";
        size--;
    }while(ctx.measureText(text).width > maxWidth && size > 20);
    return size;
}

/* DRAW ID CARD */
function drawID(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Background
    ctx.fillStyle="#1f2937";
    ctx.fillRect(0,0,canvas.width,120);

    ctx.fillStyle="#ffffff";
    ctx.font="bold 40px Segoe UI";
    ctx.textAlign="center";
    ctx.fillText("FRONTIER REGIONAL HOSPITAL", canvas.width/2,75);

    // White card body
    ctx.fillStyle="#ffffff";
    ctx.fillRect(0,120,canvas.width,480);

    // Decorative line
    ctx.fillStyle="#1f2937";
    ctx.fillRect(0,120,15,480);

    // Photo
    if(uploadedPhoto){
        ctx.drawImage(uploadedPhoto,70,170,250,300);
    }

    const textX = 380;
    const maxTextWidth = 550;

    // Name with auto resize
    const name = nameInput.value.toUpperCase();
    let nameSize = fitText(name,maxTextWidth,50);
    ctx.font="bold "+nameSize+"px Segoe UI";
    ctx.fillStyle="#111827";
    ctx.textAlign="left";
    ctx.fillText(name,textX,250);

    ctx.font="32px Segoe UI";
    ctx.fillText(positionInput.value.toUpperCase(),textX,320);

    ctx.font="26px Segoe UI";
    ctx.fillText(departmentInput.value.toUpperCase(),textX,370);

    // ID number
    ctx.font="20px Segoe UI";
    ctx.fillStyle="#555";
    ctx.fillText("ID: FRH-"+Math.floor(Math.random()*100000),textX,420);
}

/* LIVE PREVIEW */
[nameInput,positionInput,departmentInput].forEach(input=>{
    input.addEventListener("input",drawID);
});

photoInput.addEventListener("change",(e)=>{
    const file = e.target.files[0];
    if(!file) return;
    const img = new Image();
    img.onload=()=>{
        uploadedPhoto=img;
        drawID();
    };
    img.src=URL.createObjectURL(file);
});

/* DOWNLOAD */
form.addEventListener("submit",(e)=>{
    e.preventDefault();
    drawID();
    downloadLink.href = canvas.toDataURL("image/png");
    downloadLink.download = nameInput.value.replace(/ /g,"_")+"_ID.png";
    downloadLink.style.display="block";
});
</script>

</body>
</html>
