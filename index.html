<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Frontier Regional Hospital ID System</title>

<style>
body{
    font-family:Arial, sans-serif;
    background:#f4f4f4;
    text-align:center;
    padding:20px;
}

.container{
    max-width:400px;
    margin:auto;
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}

input, select{
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:5px;
    border:1px solid #ccc;
}

button{
    padding:10px 20px;
    background:#333;
    color:white;
    border:none;
    border-radius:5px;
    cursor:pointer;
    margin-top:10px;
}

button:hover{
    background:#555;
}

#customSize{
    display:none;
    gap:8px;
    flex-wrap:wrap;
}

#customSize input{
    flex:1 1 45%;
    min-width:120px;
    padding:8px;
    font-size:14px;
}

@media(max-width:500px){
    #customSize{
        flex-direction:column;
    }
    #customSize input{
        width:100%;
    }
}

canvas{
    margin-top:20px;
    border:2px solid darkgray;
}
</style>
</head>
<body>

<div class="container">

<h2>Frontier Regional Hospital</h2>

<input type="text" id="name" placeholder="Full Name" required>
<input type="text" id="position" placeholder="Position" required>
<input type="text" id="department" placeholder="Department" required>
<input type="file" id="photo" accept="image/*" required>

<select id="sizeOption" onchange="toggleCustomSize()">
    <option value="medium" selected>Medium (Default)</option>
    <option value="small">Small</option>
    <option value="large">Large</option>
    <option value="custom">Custom (CM)</option>
</select>

<div id="customSize">
    <input type="number" id="customWidth" placeholder="Width (cm)">
    <input type="number" id="customHeight" placeholder="Height (cm)">
</div>

<button onclick="generateID()">Generate ID Card</button>

<canvas id="canvas" width="350" height="500"></canvas>

<br>
<button id="downloadBtn" style="display:none;" onclick="downloadID()">Download ID Card</button>

</div>

<script>

function toggleCustomSize(){
    let option = document.getElementById("sizeOption").value;
    let custom = document.getElementById("customSize");

    if(option === "custom"){
        custom.style.display = "flex";
    }else{
        custom.style.display = "none";
    }
}

function generateID(){

    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    const name = document.getElementById("name").value.toUpperCase();
    const position = document.getElementById("position").value.toUpperCase();
    const department = document.getElementById("department").value.toUpperCase();
    const photoInput = document.getElementById("photo").files[0];
    const sizeOption = document.getElementById("sizeOption").value;

    if(!photoInput){
        alert("Please upload a photo.");
        return;
    }

    let photoWidth = 120;
    let photoHeight = 150;

    if(sizeOption === "small"){
        photoWidth = 90;
        photoHeight = 120;
    }
    else if(sizeOption === "large"){
        photoWidth = 150;
        photoHeight = 200;
    }
    else if(sizeOption === "custom"){

        let widthCM = parseFloat(document.getElementById("customWidth").value);
        let heightCM = parseFloat(document.getElementById("customHeight").value);

        if(!widthCM || !heightCM){
            alert("Enter width and height in cm.");
            return;
        }

        // Convert CM to pixels (1cm â‰ˆ 37.8px)
        photoWidth = widthCM * 37.8;
        photoHeight = heightCM * 37.8;
    }

    const background = new Image();
    background.src = "background.jpg";

    background.onload = function(){

        ctx.clearRect(0,0,canvas.width,canvas.height);

        ctx.drawImage(background,0,0,canvas.width,canvas.height);

        // Dark gray header
        ctx.fillStyle = "#333";
        ctx.fillRect(0,0,canvas.width,90);

        // Logo
        const logo = new Image();
        logo.src = "download.png";

        logo.onload = function(){
            ctx.drawImage(logo,20,15,60,60);

            ctx.fillStyle = "white";
            ctx.font = "bold 18px Arial";
            ctx.fillText("FRONTIER REGIONAL HOSPITAL",95,50);

            const reader = new FileReader();
            reader.onload = function(e){
                const photo = new Image();
                photo.src = e.target.result;

                photo.onload = function(){

                    // Photo border
                    ctx.strokeStyle = "darkgray";
                    ctx.lineWidth = 3;
                    ctx.strokeRect(115,110,photoWidth,photoHeight);

                    ctx.drawImage(photo,115,110,photoWidth,photoHeight);

                    ctx.fillStyle = "black";
                    ctx.font = "bold 18px Arial";
                    ctx.fillText(name,50,300);

                    ctx.font = "16px Arial";
                    ctx.fillText(position,50,330);
                    ctx.fillText(department,50,360);

                    document.getElementById("downloadBtn").style.display = "inline-block";
                }
            }

            reader.readAsDataURL(photoInput);
        }
    }
}

function downloadID(){
    const canvas = document.getElementById("canvas");
    const link = document.createElement("a");
    link.download = "FRH_ID_Card.png";
    link.href = canvas.toDataURL();
    link.click();
}

</script>

</body>
</html>
