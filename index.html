<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Frontier Regional Hospital - Professional ID Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#1f2937,#111827);
}

.container{
    max-width:750px;
    margin:20px auto;
    background:#fff;
    padding:25px;
    border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

h2{text-align:center;margin-bottom:20px;color:#1f2937}

form{display:flex;flex-direction:column;gap:12px}

label{font-weight:600;font-size:14px}

input,select{
    padding:12px;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:15px;
}

#customSize{
    display:none;
    gap:10px;
}

button{
    padding:14px;
    font-size:16px;
    font-weight:bold;
    border:none;
    border-radius:12px;
    background:#1f2937;
    color:white;
    cursor:pointer;
}

canvas{
    display:block;
    width:100%;
    height:auto;
    margin-top:25px;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

#downloadLink{
    display:none;
    margin-top:15px;
    text-align:center;
    padding:12px;
    background:#1f2937;
    color:white;
    text-decoration:none;
    border-radius:12px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="container">
<h2>Frontier Regional Hospital â€“ Professional ID System</h2>

<form id="idForm">

<label>Full Name</label>
<input type="text" id="name" required>

<label>Position</label>
<input type="text" id="position" required>

<label>Department</label>
<input type="text" id="department" required>

<label>Profile Photo</label>
<input type="file" id="photo" accept="image/*" required>

<label>Photo Size</label>
<select id="photoSize">
<option value="small">Small (200x250)</option>
<option value="medium" selected>Medium (250x300)</option>
<option value="large">Large (300x360)</option>
<option value="custom">Custom</option>
</select>

<div id="customSize">
<input type="number" id="customW" placeholder="Width px">
<input type="number" id="customH" placeholder="Height px">
</div>

<button type="submit">Download ID Card</button>

</form>

<canvas id="idCanvas"></canvas>
<a id="downloadLink">Download ID</a>
</div>

<script>
const canvas=document.getElementById("idCanvas");
const ctx=canvas.getContext("2d");

canvas.width=1000;
canvas.height=600;

const nameInput=document.getElementById("name");
const positionInput=document.getElementById("position");
const departmentInput=document.getElementById("department");
const photoInput=document.getElementById("photo");
const photoSizeSelect=document.getElementById("photoSize");
const customDiv=document.getElementById("customSize");
const form=document.getElementById("idForm");
const downloadLink=document.getElementById("downloadLink");

let uploadedPhoto=null;
const generatedID="FRH-"+Math.floor(Math.random()*100000);

// Show custom size inputs
photoSizeSelect.addEventListener("change",()=>{
    customDiv.style.display = photoSizeSelect.value==="custom" ? "flex" : "none";
    drawID();
});

// Auto resize text
function fitText(text,maxWidth,startSize){
    let size=startSize;
    do{
        ctx.font="bold "+size+"px Segoe UI";
        size--;
    }while(ctx.measureText(text).width>maxWidth && size>20);
    return size;
}

const background=new Image();
background.src="background.jpeg";

const logo=new Image();
logo.src="logo.jpeg";

function getPhotoSize(){
    if(photoSizeSelect.value==="small") return [200,250];
    if(photoSizeSelect.value==="large") return [300,360];
    if(photoSizeSelect.value==="custom"){
        const w=parseInt(document.getElementById("customW").value)||250;
        const h=parseInt(document.getElementById("customH").value)||300;
        return [w,h];
    }
    return [250,300];
}

function drawID(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw background image
    if(background.complete)
        ctx.drawImage(background,0,0,canvas.width,canvas.height);

    // Dark header overlay
    ctx.fillStyle="rgba(0,0,0,0.6)";
    ctx.fillRect(0,0,canvas.width,120);

    ctx.fillStyle="#fff";
    ctx.font="bold 40px Segoe UI";
    ctx.textAlign="center";
    ctx.fillText("FRONTIER REGIONAL HOSPITAL",canvas.width/2,75);

    // Logo
    if(logo.complete)
        ctx.drawImage(logo,30,20,120,80);

    const [photoW,photoH]=getPhotoSize();

    if(uploadedPhoto)
        ctx.drawImage(uploadedPhoto,70,170,photoW,photoH);

    const textX=400;
    const maxWidth=500;

    const name=(nameInput.value||"FULL NAME").toUpperCase();
    let nameSize=fitText(name,maxWidth,50);

    ctx.textAlign="left";
    ctx.fillStyle="#fff";
    ctx.font="bold "+nameSize+"px Segoe UI";
    ctx.fillText(name,textX,260);

    ctx.font="32px Segoe UI";
    ctx.fillText((positionInput.value||"POSITION").toUpperCase(),textX,330);

    ctx.font="26px Segoe UI";
    ctx.fillText((departmentInput.value||"DEPARTMENT").toUpperCase(),textX,380);

    ctx.font="22px Segoe UI";
    ctx.fillText("ID: "+generatedID,textX,430);
}

[nameInput,positionInput,departmentInput].forEach(input=>{
    input.addEventListener("input",drawID);
});

photoInput.addEventListener("change",e=>{
    const file=e.target.files[0];
    if(!file) return;
    const img=new Image();
    img.onload=()=>{
        uploadedPhoto=img;
        drawID();
    };
    img.src=URL.createObjectURL(file);
});

form.addEventListener("submit",e=>{
    e.preventDefault();
    drawID();
    downloadLink.href=canvas.toDataURL("image/png");
    downloadLink.download=nameInput.value.replace(/ /g,"_")+"_ID.png";
    downloadLink.style.display="block";
});

background.onload=drawID;
logo.onload=drawID;
drawID();
</script>

</body>
</html>
