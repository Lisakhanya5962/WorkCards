<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Frontier Regional Hospital - ID Card Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #eef2f7; color:#333; }
.container { max-width: 700px; margin: 40px auto; background: #fff; padding: 30px 40px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

h2 { text-align: center; margin-bottom: 15px; color:#505050; }
p { text-align: center; margin-bottom: 25px; color:red; }

form { display: flex; flex-direction: column; gap: 15px; }
label { font-weight: 600; margin-bottom: 5px; }
input, select { padding: 12px 15px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
input:focus, select:focus { outline:none; border-color:#505050; box-shadow:0 0 5px rgba(80,80,80,0.3); }

#custom_size { display:none; flex-direction: row; gap:10px; }
#custom_size input { flex:1; }

button { padding: 15px; font-size: 16px; font-weight: 600; border:none; border-radius:10px; background:#505050; color:#fff; cursor:pointer; transition: 0.3s; }
button:hover { background:#333; }

canvas { display:block; margin: 30px auto; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); max-width:100%; }

#downloadLink { display:none; margin: 20px auto; text-align:center; padding: 12px 20px; background:#505050; color:white; text-decoration:none; border-radius:10px; font-weight:600; transition:0.3s; }
#downloadLink:hover { background:#333; }

@media(max-width:768px){
    .container { padding:20px; }
    canvas { width: 100%; height:auto; }
}
</style>
</head>
<body>

<div class="container">
    <h2>Frontier Regional Hospital - ID Card Generator</h2>
    

    <form id="idForm">
        <label for="name">Full Name</label>
        <input type="text" id="name" placeholder="Enter your full name" required>

        <label for="position">Position</label>
        <input type="text" id="position" placeholder="Enter your position" required>

        <label for="department">Department</label>
        <input type="text" id="department" placeholder="Enter your department" required>

        <label for="photo">Profile Photo</label>
        <input type="file" id="photo" accept="image/*" required>

        <label for="photo_size">Photo Size</label>
        <select id="photo_size">
            <option value="1">Small (200 x 250)</option>
            <option value="2" selected>Medium (250 x 300) - Default</option>
            <option value="3">Large (300 x 360)</option>
            <option value="4">Custom Size</option>
        </select>

        <div id="custom_size">
            <input type="number" id="custom_width" placeholder="Custom Width (px)" min="50">
            <input type="number" id="custom_height" placeholder="Custom Height (px)" min="50">
        </div>

        <button type="submit">Generate ID Card</button>
    </form>

    <canvas id="idCanvas" width="1000" height="600"></canvas>
    <p>ðŸ”¹ When you print height= 5,4 cm width= 9cm</p>
    <a id="downloadLink">Download ID Card</a>
</div>

<script>
const form = document.getElementById('idForm');
const photoSize = document.getElementById('photo_size');
const customDiv = document.getElementById('custom_size');
const canvas = document.getElementById('idCanvas');
const ctx = canvas.getContext('2d');
const downloadLink = document.getElementById('downloadLink');

photoSize.addEventListener('change', () => {
    customDiv.style.display = (photoSize.value === "4") ? "flex" : "none";
});

form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.toUpperCase();
    const position = document.getElementById('position').value.toUpperCase();
    const department = document.getElementById('department').value.toUpperCase();
    const photoFile = document.getElementById('photo').files[0];

    if(!photoFile) return alert("Please upload a photo.");

    let photoWidth = 250, photoHeight = 300;
    if(photoSize.value === "1") [photoWidth, photoHeight] = [200,250];
    if(photoSize.value === "3") [photoWidth, photoHeight] = [300,360];
    if(photoSize.value === "4") {
        const w = parseInt(document.getElementById('custom_width').value);
        const h = parseInt(document.getElementById('custom_height').value);
        if(!isNaN(w) && !isNaN(h)) [photoWidth, photoHeight] = [w,h];
    }

    // Load images
    const background = new Image();
    background.src = 'background.jpeg';
    const logo = new Image();
    logo.src = 'download.jpeg';
    const photo = new Image();
    photo.src = URL.createObjectURL(photoFile);

    await Promise.all([
        new Promise(r => background.onload = r),
        new Promise(r => logo.onload = r),
        new Promise(r => photo.onload = r)
    ]);

    // Clear canvas
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw full background (fit entire image, no cropping)
    const bgRatio = background.width / background.height;
    const canvasRatio = canvas.width / canvas.height;
    let bgDrawWidth, bgDrawHeight, bgX, bgY;

    if(bgRatio > canvasRatio){
        // wider than canvas
        bgDrawHeight = canvas.height;
        bgDrawWidth = bgDrawHeight * bgRatio;
        bgX = (canvas.width - bgDrawWidth)/2;
        bgY = 0;
    } else {
        // taller than canvas
        bgDrawWidth = canvas.width;
        bgDrawHeight = bgDrawWidth / bgRatio;
        bgX = 0;
        bgY = (canvas.height - bgDrawHeight)/2;
    }
    ctx.drawImage(background, bgX, bgY, bgDrawWidth, bgDrawHeight);

    // Header overlay
    ctx.fillStyle='rgba(80,80,80,0.7)';
    ctx.fillRect(0,0,canvas.width,120);

    // Draw logo
    ctx.drawImage(logo, 30, 20, 150, 80);

    // Hospital name
    ctx.fillStyle='white';
    ctx.font='36px "Segoe UI", Arial, sans-serif';
    ctx.textAlign='center';
    ctx.fillText('FRONTIER REGIONAL HOSPITAL', canvas.width/2, 70);

    // Photo border & user photo
    const PHOTO_BORDER = 6;
    const photoX = 50, photoY = 150;
    ctx.fillStyle='rgb(80,80,80)';
    ctx.fillRect(photoX-PHOTO_BORDER, photoY-PHOTO_BORDER, photoWidth+2*PHOTO_BORDER, photoHeight+2*PHOTO_BORDER);
    ctx.drawImage(photo, photoX, photoY, photoWidth, photoHeight);

    // Text details (readable font)
    const textX = 350, textY = 200;
    ctx.fillStyle='white';
    ctx.textAlign='left';
    ctx.font='bold 48px "Segoe UI", Arial, sans-serif';
    ctx.fillText(name, textX, textY);
    ctx.font='32px "Segoe UI", Arial, sans-serif';
    ctx.fillText(position, textX, textY+70);
    ctx.font='28px "Segoe UI", Arial, sans-serif';
    ctx.fillText(department, textX, textY+120);

    // Show download link
    downloadLink.href = canvas.toDataURL('image/png');
    downloadLink.download = name.replace(/ /g,'_')+'.png';
    downloadLink.style.display='inline-block';
});
</script>
</body>
</html>

